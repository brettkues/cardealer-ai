import { initializeApp, getApps } from "firebase/app"; import { getAuth, GoogleAuthProvider, browserLocalPersistence, setPersistence, } from "firebase/auth"; const firebaseConfig = { apiKey: process.env.NEXT_PUBLIC_FIREBASE_API_KEY, authDomain: process.env.NEXT_PUBLIC_FIREBASE_AUTH_DOMAIN, projectId: process.env.NEXT_PUBLIC_FIREBASE_PROJECT_ID, }; const app = !getApps().length ? initializeApp(firebaseConfig) : getApps()[0]; // Auth export const auth = getAuth(app); // Force persistent login (fixes bounce-back issue) setPersistence(auth, browserLocalPersistence).catch((err) => console.error("Firebase persistence error:", err) ); // Google provider export const googleProvider = new GoogleAuthProvider(); export default app;
